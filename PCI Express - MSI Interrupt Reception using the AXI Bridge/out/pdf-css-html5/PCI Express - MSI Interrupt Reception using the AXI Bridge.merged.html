<!DOCTYPE html><html xtrf="file:/D:/Skill%20Development/DITA/PCIe/PCI%20Express%20-%20MSI%20Interrupt%20Reception%20using%20the%20AXI%20Bridge.ditamap" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="copyright" content="(C) Copyright 2024"/><meta name="DC.rights.owner" content="(C) Copyright 2024"/>
<link rel="stylesheet" type="text/css" href="file:/C:/Users/rahul.p/AppData/Local/Programs/Oxygen%20XML%20Author%2026/frameworks/dita/DITA-OT/plugins/com.oxygenxml.webhelp.responsive/oxygen-webhelp/app/topic-page-print.css"/>
<link rel="stylesheet" type="text/css" href="file:/C:/Users/rahul.p/AppData/Local/Programs/Oxygen%20XML%20Author%2026/frameworks/dita/DITA-OT/plugins/com.oxygenxml.pdf.css/css/print/p-dita.css"/>
<link rel="stylesheet" type="text/css" href="file:/C:/Users/rahul.p/AppData/Local/Programs/Oxygen%20XML%20Author%2026/frameworks/dita/DITA-OT/plugins/com.oxygenxml.editlink/pdf-css.css"/>
<link rel="stylesheet" type="text/css" href="file:/C:/Users/rahul.p/AppData/Local/Programs/Oxygen%20XML%20Author%2026/frameworks/dita/DITA-OT/plugins/com.oxygenxml.webhelp.responsive/templates/oxygen/oxygen-print.css"/>
<link rel="stylesheet" type="text/css" href="file:/C:/Users/rahul.p/AppData/Local/Programs/Oxygen%20XML%20Author%2026/frameworks/dita/DITA-OT/plugins/com.oxygenxml.webhelp.responsive/templates/oxygen/notes.css"/>
<meta name="generator" content="DITA-OT"/><meta name="DC.type" content="map"/><meta name="DC.format" content="HTML5"/><meta name="DC.language" content="en"/><title>PCI Express - MSI Interrupt Reception using the AXI Bridge</title></head><body class="wh_topic_page"><div class="wh_content_area"><div class="wh_topic_body"><div class="wh_topic_content"><div xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" cascade="merge" class="- map/map map" ditaarch:DITAArchVersion="1.3" domains="(map mapgroup-d) (topic abbrev-d) (topic delay-d) a(props deliveryTarget) (map ditavalref-d) (map glossref-d) (topic hazard-d) (topic hi-d) (topic indexing-d) (topic markup-d) (topic pr-d) (topic relmgmt-d) (topic sw-d) (topic ui-d) (topic ut-d) (topic markup-d xml-d)" specializations="@props/deliveryTarget" xml:lang="en" lang="en"><div class="- front-page/front-page front-page"><div class="- front-page/front-page-title front-page-title"><div class="- topic/title title">PCI Express - MSI Interrupt Reception using the AXI Bridge</div></div></div><div class="- toc/toc toc"><div empty="true" class="- toc/title title"></div>
    <div class="- topic/title title">PCI Express - MSI Interrupt Reception using the AXI Bridge</div>
    <div is-chapter="true" href="#unique_1" type="concept" class="- map/topicref topicref"><div data-topic-id="pci_express_overview" class="- map/topicmeta topicmeta"><div appid="pci_express_overview" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_1" class="- topic/navtitle navtitle">PCI Express Overview</div></div></div>
    <div is-chapter="true" href="#unique_2" type="concept" class="- map/topicref topicref"><div data-topic-id="interrupts_overview" class="- map/topicmeta topicmeta"><div appid="interrupts_overview" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_2" class="- topic/navtitle navtitle">Interrupts Overview</div></div></div>
    <div is-chapter="true" href="#unique_3" type="concept" class="- map/topicref topicref"><div data-topic-id="axi_bridge_overview" class="- map/topicmeta topicmeta"><div appid="axi_bridge_overview" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_3" class="- topic/navtitle navtitle">AXI Bridge Overview</div></div></div>
    <div is-chapter="true" href="#unique_4" type="task" class="- map/topicref topicref"><div data-topic-id="msi_reception_when_using_the_axi_bridge" class="- map/topicmeta topicmeta"><div appid="msi_reception_when_using_the_axi_bridge" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_4" class="- topic/navtitle navtitle">MSI Reception when using the AXI Bridge</div><div class="- map/shortdesc shortdesc">The MSI are memory write (MWr) TLPs. The core automatically builds the MSI packet         whenever requested by your application logic and a simple handshake is all that is required.         The AXI bridge receives MSI requests in the same manner as a MWr. The termination of an MSI         request must be done by your application or by using the optional MSI         controller.</div></div></div>
    <div is-chapter="true" href="#unique_5" type="reference" class="- map/topicref topicref"><div data-topic-id="features" class="- map/topicmeta topicmeta"><div appid="features" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_5" class="- topic/navtitle navtitle">Features</div><div class="- map/shortdesc shortdesc"></div></div></div>
    <div is-chapter="true" href="#unique_6" type="concept" class="- map/topicref topicref"><div data-topic-id="msi_request_detection_criteria" class="- map/topicmeta topicmeta"><div appid="msi_request_detection_criteria" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_6" class="- topic/navtitle navtitle">MSI Request Detection Criteria:</div></div></div>
    <div is-chapter="true" href="#unique_7" type="concept" class="- map/topicref topicref"><div data-topic-id="dm_core_block_diagram_with_ahb_axi_bridge_module" class="- map/topicmeta topicmeta"><div appid="dm_core_block_diagram_with_ahb_axi_bridge_module" oxy-source="topic" class="- topic/resourceid resourceid"></div><div href="#unique_7" class="- topic/navtitle navtitle">DM Core Block Diagram (with AHB/AXI Bridge Module)</div></div></div>
</div><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic concept/concept topic concept nested0" aria-labelledby="ariaid-title1" break-before="true" is-chapter="true" id="unique_1" topicrefclass="- map/topicref " nd:nd-id="pci_express_overview" oid="pci_express_overview" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title1"><span class="- topic/ph topic/title-wrapper ph title-wrapper">PCI Express Overview</span></h1>
    <div class="- topic/body concept/conbody body conbody">
        <div class="- topic/p p">
            <ul class="- topic/ul ul" id="unique_1_Connect_42_ul_ict_w4m_s1c" nd:nd-id="ul_ict_w4m_s1c">
                <li class="- topic/li li">Peripheral Component Interconnect (PCI) is a connection interface standard.</li>
                <li class="- topic/li li">The PCI Express is an upgrade over the previous PCI, where it offers more
                    bandwidth and is compatible with existing operating systems. </li>
                <li class="- topic/li li">Unlike the PCI’s parallel connection, the PCI handles several point-to-point
                    serial connections with a switch (like a network).</li>
            </ul>
        </div>
    </div>
</article><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic concept/concept topic concept nested0" aria-labelledby="ariaid-title2" break-before="true" is-chapter="true" id="unique_2" topicrefclass="- map/topicref " nd:nd-id="interrupts_overview" oid="interrupts_overview" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title2"><span class="- topic/ph topic/title-wrapper ph title-wrapper">Interrupts Overview</span></h1>
    <div class="- topic/body concept/conbody body conbody">
        <ul class="- topic/ul ul" id="unique_2_Connect_42_ul_cql_z4m_s1c" nd:nd-id="ul_cql_z4m_s1c">
            <li class="- topic/li li">Interrupts are a method of creating a break in the flow of function. </li>
            <li class="- topic/li li">The PCI Express feature three main methods of interrupt handling: Legacy Interrupt,
                Message Signaled Interrupts (MSI), and MSI-X.</li>
        </ul>
    </div>
</article><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic concept/concept topic concept nested0" aria-labelledby="ariaid-title3" break-before="true" is-chapter="true" id="unique_3" topicrefclass="- map/topicref " nd:nd-id="axi_bridge_overview" oid="axi_bridge_overview" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title3"><span class="- topic/ph topic/title-wrapper ph title-wrapper">AXI Bridge Overview</span></h1>
    <div class="- topic/body concept/conbody body conbody">
        <ul class="- topic/ul ul" id="unique_3_Connect_42_ul_zb3_bpm_s1c" nd:nd-id="ul_zb3_bpm_s1c">
            <li class="- topic/li li">The AXI Bridge Module acts as a bridge between the standard AXI interfaces and the
                Synopsys DesignWare PCIe core native interfaces. </li>
            <li class="- topic/li li">The bridge interconnects the AXI interfaces within an AMBA-embedded system with a
                remote PCIe link, as either a root complex port, or as an endpoint port.</li>
        </ul>
    </div>
</article><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic task/task topic task nested0" aria-labelledby="ariaid-title4" break-before="true" is-chapter="true" id="unique_4" topicrefclass="- map/topicref " nd:nd-id="msi_reception_when_using_the_axi_bridge" oid="msi_reception_when_using_the_axi_bridge" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title4"><span class="- topic/ph topic/title-wrapper ph title-wrapper">MSI Reception when using the AXI Bridge</span></h1>
    
    <div class="- topic/body task/taskbody body taskbody"><p class="- topic/shortdesc shortdesc">The MSI are memory write (MWr) TLPs. The core automatically builds the MSI packet
        whenever requested by your application logic and a simple handshake is all that is required.
        The AXI bridge receives MSI requests in the same manner as a MWr. The termination of an MSI
        request must be done by your application or by using the optional MSI
        controller.</p>
        <section class="- topic/section task/context section context">
            <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">AXI MSI Controller (RC Mode):</strong></p>
        </section>
        <section class="- topic/ol task/steps ol steps"><ol class="- topic/ol task/steps ol steps"><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">The bridge provides an optional MSI controller to detect and terminate incoming
                    MSI requests by enabling the <code class="+ topic/ph pr-d/codeph ph codeph">CX_MSI_CTRL_ENABLE =1</code></span>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">The MSI packets are captured and terminated in the AXI bridge, and an interrupt
                    is signaled locally.</span>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">The MSI Controller is programmed with the similar system MSI address.</span>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">The MSI interrupt is detected when the received MWr request matches specified
                    MSI address, along with the MSI memory write request conditions.</span>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">The MSI Controller that decodes the MSI MWr data payload that determines the
                    Endpoint device (EP) and the interrupt vector corresponding to the MSI. </span>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd"><code class="+ topic/ph pr-d/codeph ph codeph">msi_ctrl_int output</code>is asserted when as valid interrupt is
                    decoded.</span>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">De-assertion takes place when there is no MSI interrupt pending. </span>
            </li></ol></section>
    </div>
</article><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic reference/reference topic reference nested0" aria-labelledby="ariaid-title5" break-before="true" is-chapter="true" id="unique_5" topicrefclass="- map/topicref " nd:nd-id="features" oid="features" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title5"><span class="- topic/ph topic/title-wrapper ph title-wrapper">Features</span></h1>
    
    <div class="- topic/body reference/refbody body refbody"><p class="- topic/shortdesc shortdesc"></p>
        <div class="- topic/example example">
            <ul class="- topic/ul ul" id="unique_5_Connect_42_ul_sjt_tqm_s1c" nd:nd-id="ul_sjt_tqm_s1c">
                <li class="- topic/li li">MSI interrupt controller is only enabled in RC mode when device type is 0x4. It
                    is inactive in EP mode. </li>
                <li class="- topic/li li">Up to eight EPs are supported by the MSI interrupt controller. </li>
                <li class="- topic/li li">Each supported EP has a set of interrupt enable, mask, and status
                    registers.</li>
                <li class="- topic/li li">Guarantees correct AXI ordering with respect to other inbound posted writes by
                    generating the MSI interrupt only after your application AXI slave acknowledges
                    responses of previous posted TLPs.</li>
                <li class="- topic/li li">A maximum of 32 interrupts are supported per EP.</li>
                <li class="- topic/li li">Optional 32-bit register driven general purpose outputs
                        <code class="+ topic/ph pr-d/codeph ph codeph">(msi_ctrl_io[31:0])</code></li>
            </ul>
        </div>
    </div>
</article><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic concept/concept topic concept nested0" aria-labelledby="ariaid-title6" break-before="true" is-chapter="true" id="unique_6" topicrefclass="- map/topicref " nd:nd-id="msi_request_detection_criteria" oid="msi_request_detection_criteria" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title6"><span class="- topic/ph topic/title-wrapper ph title-wrapper">MSI Request Detection Criteria:</span></h1>
    <div class="- topic/body concept/conbody body conbody">
        <ul class="- topic/ul ul" id="unique_6_Connect_42_ul_drk_1rm_s1c" nd:nd-id="ul_drk_1rm_s1c">
            <li class="- topic/li li">Header attributes bits are zero. No snoop (NS) and relaxed ordering (RO) must be
                zero.</li>
            <li class="- topic/li li">Length field is 0x01 to indicate a payload of one DWORD.</li>
            <li class="- topic/li li">First byte enable (FBE) is 4’bxx11 (enabling the first two bytes of the
                payload.)</li>
            <li class="- topic/li li">Last byte enable (LBE) is 4’b0000.</li>
            <li class="- topic/li li">TLP address corresponds to system’s chosen MSI address as programmed in the “MSI
                Controller Address Register” <code class="+ topic/ph pr-d/codeph ph codeph">(MSI_CTRL_ADDR_REG and
                    MSI_CTRL_UPPER_ADDR_REG)</code>. This register is not the “MSI Lower 32 Bits
                Address Register” which is part of the PCI Express MSI capability register
                structure. </li>
        </ul>
    </div>
</article><article xmlns:nd="http://www.oxygenxml.com/css2fo/named-destinations" class="- topic/topic concept/concept topic concept nested0" aria-labelledby="ariaid-title7" break-before="true" is-chapter="true" id="unique_7" topicrefclass="- map/topicref " nd:nd-id="dm_core_block_diagram_with_ahb_axi_bridge_module" oid="dm_core_block_diagram_with_ahb_axi_bridge_module" specializations="@props/deliveryTarget">
    <h1 class="- topic/title title topictitle1" id="ariaid-title7"><span class="- topic/ph topic/title-wrapper ph title-wrapper">DM Core Block Diagram (with AHB/AXI Bridge Module)</span></h1>
    <div class="- topic/body concept/conbody body conbody">
        <figure class="- topic/fig fig fignone" id="unique_7_Connect_42_fig_rlg_jrm_s1c" nd:nd-id="fig_rlg_jrm_s1c"><img xmlns:dita-ot="http://dita-ot.sourceforge.net/ns/201007/dita-ot" class="- topic/image image" dita-ot:image-width="658" dita-ot:image-height="738" href="file:/D:/Skill%20Development/DITA/PCIe/dm_core_block_diagram_with_ahb_axi_bridge_module.png" id="unique_7_Connect_42_image_rlc_lrm_s1c" nd:nd-id="image_rlc_lrm_s1c" placement="inline" src="file:/D:/Skill%20Development/DITA/PCIe/dm_core_block_diagram_with_ahb_axi_bridge_module.png"/></figure>
    </div>
</article></div></div></div></div></body></html>